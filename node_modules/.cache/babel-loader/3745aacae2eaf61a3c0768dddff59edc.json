{"ast":null,"code":"import _createForOfIteratorHelper from\"/Users/michelle_ma/Desktop/web-project3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper\";import _slicedToArray from\"/Users/michelle_ma/Desktop/web-project3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useEffect,useState}from'react';import{useParams}from'react-router';import{useNavigate}from'react-router';import{useSelector,useDispatch}from\"react-redux\";import\"./style/Job.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function(){var jobId=useParams().jobId;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),job=_useState2[0],setJob=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),currentUserName=_useState4[0],setCurrentUserName=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),currentUser=_useState6[0],setCurrentUser=_useState6[1];var navigate=useNavigate();var state=useSelector(function(state){return state;});var username=useSelector(function(state){return state.username;});var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),isFavorited=_useState8[0],setIsFavorited=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),myfavoriteJobsListID=_useState10[0],setMyFavoriteJobsListID=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),isLoggedIn=_useState12[0],setIsLoggedIn=_useState12[1];function checkLogin(){axios.get('/api/users/whoIsLoggedIn').then(function(response){setCurrentUserName(response.data);}).catch(function(){return navigate('/login');});}function getUserFavoriteJobIDList(){axios.get('/api/users/findMyFavorites/'+username).then(function(response){setMyFavoriteJobsListID(response.data);}).catch(function(error){return console.error(error);});}useEffect(getUserFavoriteJobIDList,[]);setTimeout(function(){var _iterator=_createForOfIteratorHelper(myfavoriteJobsListID),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var id=_step.value;console.log(id);if(jobId==id){setIsFavorited(true);}else{setIsFavorited(false);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}},500);function findJobDetails(){axios.get('/api/jobs/find/findById/'+jobId).then(function(response){return setJob(response.data);}).catch(function(error){return console.log(\"Could not find Job\");});}useEffect(findJobDetails,[]);var favoriteButtonComponent=isFavorited?/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{children:\" Unfavorite\"})}):/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){axios.post('/api/users/addMyFavoriteJob/'+username,jobId).then(function(response){console.log(response);setIsFavorited(!isFavorited);}).catch(function(error){return console.log(error);});},children:\" Favorite\"})});var funcComp=username==state.jobOwner?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){axios.post('/api/jobs/delete/'+jobId).then(function(response){console.log(\"Success delete!\");navigate('/');}).catch(function(error){return console.log(error);});},children:\"Delete\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return navigate('/editJob/'+jobId);},children:\"Edit\"})]}):/*#__PURE__*/_jsx(_Fragment,{});var jobDetailComponent=job?job.map(function(j){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Job Title:\"}),\" \",j.title,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Company:\"}),\" \",j.companyName,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Location:\"}),\" \",j.location,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Description:\"}),\" \",j.description]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Employer Email:\"}),\" \",/*#__PURE__*/_jsx(\"a\",{href:\"mailto:m.bluth@example.com\",children:j.employerEmail}),\" \"]}),j.companyLink&&/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Company Link:\"}),j.companyLink,\" \"]}),/*#__PURE__*/_jsxs(\"div\",{children:[\" \",/*#__PURE__*/_jsx(\"b\",{children:\"Post Date:\"}),\" \",j.postdate,\" \"]})]});}):/*#__PURE__*/_jsx(\"div\",{children:\" No Job found \"});return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"favoriate_result\",children:\"Details\"}),/*#__PURE__*/_jsxs(\"section\",{id:\"job-detail\",children:[jobDetailComponent,favoriteButtonComponent,funcComp]})]});}","map":{"version":3,"sources":["/Users/michelle_ma/Desktop/web-project3/src/JobDetails.jsx"],"names":["axios","React","useEffect","useState","useParams","useNavigate","useSelector","useDispatch","jobId","job","setJob","currentUserName","setCurrentUserName","currentUser","setCurrentUser","navigate","state","username","isFavorited","setIsFavorited","myfavoriteJobsListID","setMyFavoriteJobsListID","isLoggedIn","setIsLoggedIn","checkLogin","get","then","response","data","catch","getUserFavoriteJobIDList","error","console","setTimeout","id","log","findJobDetails","favoriteButtonComponent","post","funcComp","jobOwner","jobDetailComponent","map","j","title","companyName","location","description","employerEmail","companyLink","postdate"],"mappings":"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","sourcesContent":["import axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport { useParams } from 'react-router';\nimport { useNavigate } from 'react-router';\nimport { useSelector, useDispatch } from \"react-redux\";\nimport \"./style/Job.css\";\n\nexport default function () {\n    const jobId = useParams().jobId;\n    const [job, setJob] = useState(null);\n    const [currentUserName, setCurrentUserName] = useState('');\n    const [currentUser, setCurrentUser] = useState('');\n    const navigate = useNavigate();\n    const state = useSelector((state) => state);\n    const username = useSelector(state => state.username);\n    const [isFavorited, setIsFavorited] = useState();\n    const [myfavoriteJobsListID, setMyFavoriteJobsListID] = useState([]);\n    const [isLoggedIn, setIsLoggedIn] = useState([]);\n\n    function checkLogin() {\n        axios.get('/api/users/whoIsLoggedIn')\n            .then((response) => {\n                setCurrentUserName(response.data);\n            })\n            .catch(() => navigate('/login'))\n    }\n\n    function getUserFavoriteJobIDList() {\n        axios.get('/api/users/findMyFavorites/' + username)\n            .then(response => {\n                setMyFavoriteJobsListID(response.data);\n            })\n            .catch(error => console.error(error));\n    }\n\n    useEffect(getUserFavoriteJobIDList, []);\n\n    setTimeout(() => {\n        for (let id of myfavoriteJobsListID) {\n            console.log(id);\n            if (jobId == id) {\n                setIsFavorited(true);\n            } else {\n                setIsFavorited(false);\n            }\n        }\n    }, 500)\n\n\n    function findJobDetails() {\n        axios.get('/api/jobs/find/findById/' + jobId)\n            .then(response => setJob(response.data))\n            .catch(error => console.log(\"Could not find Job\"));\n    }\n    useEffect(findJobDetails, []);\n\n    const favoriteButtonComponent = (isFavorited) ?\n        (<>\n            <button> Unfavorite</button>\n        </>)\n        : (<>\n            <button\n                onClick={() => {\n                    axios.post('/api/users/addMyFavoriteJob/' + username, jobId)\n                        .then((response) => {\n                            console.log(response);\n                            setIsFavorited(!isFavorited);\n                        })\n                        .catch((error) => console.log(error))\n                }}\n            > Favorite</button>\n        </>);\n\n\n    const funcComp = (username == state.jobOwner) ?\n        (<>\n            <button\n                onClick={() => {\n                    axios.post('/api/jobs/delete/' + jobId)\n                        .then((response) => {\n                            console.log(\"Success delete!\");\n                            navigate('/')\n                        })\n                        .catch((error) => console.log(error))\n                }}\n            >Delete</button>\n            <button onClick={() => navigate('/editJob/' + jobId)}>Edit</button>\n        </>)\n        : (<></>);\n\n    const jobDetailComponent = job ?\n        (\n            job.map(j => {\n                return (<>\n\n                    <div> <b>Job Title:</b> {j.title} </div>\n                    <div> <b>Company:</b> {j.companyName} </div>\n                    <div> <b>Location:</b> {j.location} </div>\n                    <div> <b>Description:</b> {j.description}</div>\n                    <div> <b>Employer Email:</b> <a href=\"mailto:m.bluth@example.com\">{j.employerEmail}</a> </div>\n                    {j.companyLink && <div> <b>Company Link:</b>{j.companyLink} </div>}\n                    <div> <b>Post Date:</b> {j.postdate} </div>\n\n                </>)\n            })\n        ) :\n        (<div> No Job found </div>);\n\n    return (\n        <div>\n            <h1 className=\"favoriate_result\">Details</h1>\n\n            <section id=\"job-detail\">\n                {jobDetailComponent}\n                {favoriteButtonComponent}\n                {funcComp}\n            </section>\n\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}